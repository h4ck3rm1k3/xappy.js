\documentclass{beamer}

\begin{document}
\frame{


\Large
XML Generator
\normalsize
\begin{itemize}
\item genxml(type, elem)
\item createHeader()
\item createFooter()
\end{itemize}

\textbf{The header}:\\
$<$ ?xml version = "1.0" standalone="no"?$>$ \\
$<$ osm \\
version = "0.6" \\
generator="xappy.js v0.2" \\
xapi:planetDate = "200803150826"\\
xapi:copyright = "2011 OpenStreetMap contributors"$>$\\
\dots\\
$</$osm$>$
}

\frame{
\Large
JSON Generator\\
\normalsize
\begin{itemize}
\item genjson(type, elem)
\item createHeader()
\item createFooter()
\end{itemize}

\textbf{The header}\\
\{\\
\hspace*{4mm}"version": 0.6,\\
\hspace*{4mm} "generator": "xappy.js v0.2",\\
\hspace*{4mm} "xapi":\{\\
\hspace*{8mm} "planetDate": 200803150826,\\
\hspace*{8mm} "copyright": "XXX"\\
\hspace*{4mm} \},\\

\hspace*{4mm}"elements": [\\
\hspace*{8mm}\dots\\
\hspace*{4mm}]\\
\}

}


\frame{
\Large{Coding Style}
\\

\normalsize
Combination of Google \& Crockford\\
Enforcement with the tool JSHint
}

\begin{frame}{Xappy.js Modules}
    This module contains glue code to stick various elements of the module to gether.

    Therefore various helpers are used for:

    \begin{itemize}
        \item Reading a config file
        \item Command line interface
        \item Loading all modules
        \item Configure a Callback for node.js
    \end{itemize}
\end{frame}

\begin{frame}{Validator}

    \begin{block}{Validates}
        \begin{itemize}
            \item bbox out of range
            \item bbox: left and right or top and bottom are swapped
            \item tag predicate with child predicate no(tags)
            \item tag predicate with child predicate tags
            \item node object with child predicate attribute node
            \item way object with child predicate attribute way
            \item way object and child predicate attribute node
        \end{itemize}
    \end{block}

\end{frame}

\begin{frame}{postgresdb - Queries}
    \begin{block}{Queries}
        \begin{itemize}
            \item Prepared statements
            \item name, sqlstatement, values
            \item secure, fast
        \end{itemize}
    \end{block}
\end{frame}
\begin{frame}{postgresdb - QueryPlan}
    \begin{block}{QueryPlan}
        \begin{itemize}
            \item Groups queries for all tables
            \item One query for every table (nodes, ways, relations)
        \end{itemize}
    \end{block}
\end{frame}
\begin{frame}{postgresdb - QueryBuilder}
    \begin{block}{QueryBuilder}
        \begin{itemize}
            \item creates queries and groups them into QueryPlans based on xapiRequests
        \end{itemize}
    \end{block}
\end{frame}
\begin{frame}{postgresdb - main}
    \begin{block}{main}
        \begin{itemize}
            \item passes xapiRequestsObject to queryBuilder
        \end{itemize}
    \end{block}
\end{frame}

\begin{frame}{EventHandler}

    Nessecary because of async behaviour of node.

    \begin{itemize}
        \item callbacks must be registered for events
        \item pushes objects from DB
        \item events emitted befor first and last
    \end{itemize}

    The EventHandler is created by DB the module, callbacks are defined in xappy.js.

\end{frame}

\include{whosh}

\end{document}
